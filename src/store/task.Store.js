
//todo çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œç”¨ mobx ç®¡ç†
//æ•°æ®é©±åŠ¨è§†å›¾
//ğŸ“–ğŸ“–ğŸ“–ä¸€èˆ¬æ¥è¯´ï¼Œè®¡ç®—å±æ€§å°±å…ˆ get XXX(){} ï¼Œå† return å‡ºæ•°æ®

import {  makeAutoObservable } from 'mobx'

//List ä¸šåŠ¡æ•°æ®
class TaskStore {
  list = [
    {
      id:1,
      name: 'å­¦ä¹ react',
      isDone: false
    },
    {
      id:2,
      name: 'æå®šmobx',
      isDone: true
    },
    {
      id:3,
      name: 'å­¦ä¹  ts',
      isDone: true
    }
  ]


  constructor() {
    makeAutoObservable(this)
  }

  

  //ğŸ”¥ğŸ”¥ğŸ”¥å®šä¹‰ checkbox å•é€‰æ“ä½œçš„æ–¹æ³•ï¼Œç‚¹å‡»åå°±æ›´æ”¹ä¸Šé¢çš„æ•°æ®
  changeCheckbox (clickId,isCheck){

    //å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥åŒ¹é… list ä¸­çš„ idï¼Œ æŸ¥æ‰¾ id (ğŸ”¥ğŸ”¥1åœ¨æ•°ç»„é‡Œè¾¹æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡å¹¶è¿›è¡Œä¿®æ”¹å°±ç”¨ findï¼Œä¸ä¼šæ–°å¢æ•°ç»„)
    const listObj = this.list.find( item => item.id === clickId )//ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å¦‚æœè¿™ä¸ª id è·Ÿç‚¹å‡» list çš„å¯¹è±¡çš„ id åŒ¹é…ï¼Œé‚£ä¹ˆå°±å»ä¿®æ”¹å®ƒçš„æ•°æ®ï¼ï¼
      
    //è®¨å·§äº†ï¼ï¼ğŸ”¥ğŸ”¥å› ä¸ºåŸç”Ÿç³»ç»Ÿå®šä¹‰çš„ checked = true æ˜¯æœªæ‰“å‹¾çŠ¶æ€ğŸ”¥ğŸ”¥ï¼Œè€Œæˆ‘ä»¬çš„ isDone:false æ˜¯æœªæ‰“å‹¾ï¼Œæ‰€ä»¥ç›´æ¥ç›¸ç­‰å°±å¯ä»¥äº†ï¼Œä¸ç”¨ç‰¹åœ°å–è¿”ï¼ï¼
    listObj.isDone = isCheck

  }



  //ğŸ”¥ğŸ”¥ğŸ”¥å®šä¹‰é¡¶éƒ¨ã€å…¨é€‰ icon ã€‘é€‰ä¸­å æ‰€æœ‰åˆ—è¡¨éƒ½é€‰ä¸­çš„æ–¹æ³•
  allCheck (checked) { //éƒ½æ˜¯é€‰ä¸­çŠ¶æ€åˆ™ä¸º true ,æ‰€å“Ÿå°±ä¼šèµ°ä¸‹ä¸€æ­¥s
    //æŠŠæ‰€æœ‰åˆ—è¡¨æ•°ç»„çš„ isDone å±æ€§éƒ½æ”¹æˆç›¸åŒçš„å€¼ï¼ˆğŸ”¥ğŸ”¥ä¿®æ”¹æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œå°±ç”¨ forEach æ–¹æ³•ï¼‰
    this.list.forEach(item => {item.isDone = checked})
  }


  //ğŸ”¥ğŸ”¥ğŸ”¥è®¡ç®—å±æ€§ï¼Œç”¨æ¥åˆ¤æ–­é¡¶éƒ¨ã€å…¨é€‰ iconã€‘æ˜¯ã€é€‰ä¸­æ€ã€‘è¿˜æ˜¯ã€æœªé€‰ä¸­æ€ã€‘ï¼Œå¦‚æœæ‰€æœ‰å­é¡¹éƒ½æ˜¯é€‰ä¸­çŠ¶æ€é‚£ä¹ˆä¼šè¿”å› trueï¼Œå°±å˜æˆã€é€‰ä¸­æ€ã€‘äº† (åŸºäºç°æœ‰æ•°æ®ï¼Œç»è¿‡ä¸€å®šçš„ç­›é€‰è®¡ç®—ï¼Œå¾—åˆ°ä¸€å®šçš„å€¼)
  get isAll() {  //æ„é€ å‡½æ•°å†…é€šè¿‡ setXXX() ä¸ getXXX() æ–¹æ³•æ¥ï¼šä¿®æ”¹å€¼ï¼Œè·å–å€¼ã€‚
    return this.list.every(item => item.isDone) //ğŸ”¥ğŸ”¥åˆ¤æ–­æ•°ç»„å†…æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæŸä¸€æ¡ä»¶ï¼Œå°±ç”¨ every
  }



  //ğŸš®ğŸš®å®šä¹‰åˆ é™¤æ“ä½œ (è¿™ç§å†™æ³•æ˜¯æ”¾åˆ°åŸå‹ä¸Šï¼Œè€Œä¸æ˜¯æ”¾åˆ°å®ä¾‹ä¸Šï¼Œå› ä¸ºå®ä¾‹ä¸Šçš„æ–¹æ³•æ˜¯ä¸èƒ½è¢«ç»§æ‰¿çš„)
  deleteTask = (deleleId) => {
    
    //æ‹¿åˆ°è¦åˆ é™¤å¯¹è±¡çš„ id, å•ç‹¬æŠŠå®ƒè¿‡æ»¤æ‰ï¼ï¼
    //ğŸ”¥ğŸ”¥ğŸ”¥filter å¾—åˆ°ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ‰€ä»¥è¦ã€é‡æ–°èµ‹å€¼ã€‘ = è¿™ä¸ªæ–°æ•°ç»„ï¼ï¼
    this.list = this.list.filter(item => item.id !== deleleId) //è¿‡æ»¤å‡ºä¸ç­‰äºè¦è¢«åˆ é™¤çš„è¿™ä¸€æ¡ï¼ˆç›¸å½“äºå•ç‹¬éšè—ç€ä¸€æ¡ï¼ï¼‰
  }



  //ğŸ’¥ğŸ’¥å®šä¹‰å›è½¦æ–°å¢çš„æ–¹æ³•
  addTask = (task) => {
    this.list.push(task) //æŠŠæ–°å¢çš„ task ç»™ push åˆ° list æ•°ç»„é‡Œè¾¹
  }



  //ğŸ”¥ğŸ”¥ğŸ”¥è®¡ç®—å±æ€§ï¼Œç”¨æ¥è®¡ç®—å®Œæˆçš„ä»»åŠ¡æ•° (åŸºäºç°æœ‰æ•°æ®ï¼Œç»è¿‡ä¸€å®šçš„ç­›é€‰è®¡ç®—ï¼Œå¾—åˆ°ä¸€å®šçš„å€¼)
  get isFinishLength () {
    return this.list.filter(item => item.isDone ).length //ğŸ”¥âš¡ï¸âš¡ï¸ğŸ”¥return å¹¶è¿‡æ»¤å‡ºæ‰€æœ‰ isDone ä¸º true çš„æ•°æ®ï¼Œå¹¶ä¸”è®¡ç®— isDone æ•°æ®çš„æ•°é‡
  }


}


export default TaskStore
